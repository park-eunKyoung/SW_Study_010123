<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"
      integrity="sha512-WFN04846sdKMIP5LKNphMaWzU7YpMyCU245etK3g/2ARYbPK9Ub18eG+ljU96qKRCWh+quCY7yefSmlkQw1ANQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>
  <body>
    <script>
      //얕은복사(Shallow copy), 깊은 복사(Deep copy)
      const arr1 = [1, 2, 3, 4];
      const arr2 = []; //참조값
      arr1.forEach((item) => {
        arr2.push(item);
      });
      arr1[0] = 10;
      console.log(arr1, arr2, arr1 === arr2);

      const user = {
        name: 'kim',
        age: 40,
        emails: ['thekim@gmail.com'],
      };
      // const copyUser=user; //얕은 복사
      // const copyUser = Object.assign({},user); //깊은 복사 아님, 배열때문에

      //let copyUser={...user};
      //let copyUser={name:user.name,age:user.age,emails:user.emails}
      // user.emails.push('aaa@nuri.net');
      // user.age=22;
      // //이메일 깊은복사
      // let copyUser={};
      // deepCopy(user,copyUser);
      //deep copy 는 lodash 라이브러리의 cloneDeep()이용
      let copyUser = _.cloneDeep(user);
      user.emails.push('aaa@gmail.com');
      console.log(user, copyUser, user === copyUser);
      function deepCopy(source, target) {
        target.name = source.name;
        target.age = source.age;
        target.emails = [];
        // source.email.forEach((email) => {
        //   target.emails.push(email);
        // });
        target.emails.push(...source.emails); // 정보를 펼쳐주는 전개연산자 (...)
      }
      // console.log(user,copyUser ,user===copyUser);
      // user.emails.push('aaa@nuri.net');
      // console.log(user,copyUser,user.emails===copyUser.emails);
    </script>
  </body>
</html>
